import { getFavourites } from "../context/addFavourites";
import { createContext } from "react";
import { useState, useEffect } from "react"

export const FavouritesMassive = createContext()

export function FavouritesProvider({ children }) {
    const [favourites, setFavorites] = useState([])

    useEffect(() => {

        const up = getFavourites()
        setFavorites(up)
        
    }, [])

    const addFavourites = (product) => {
        const update = [...favourites, product]
        setFavorites(update)
        localStorage.setItem("favourites", JSON.stringify(update))   
    }

    const deleteFavorites = (deleteIndex) => {
        const updateDel = favourites.filter((_, index) => index !== deleteIndex)
        setFavorites(updateDel)
        localStorage.setItem("favourites", JSON.stringify(updateDel))
    }

    return (
        <FavouritesMassive.Provider value={{favourites, addFavourites, deleteFavorites }}>
            {children}
        </FavouritesMassive.Provider>
    )
}